ARM GAS  /tmp/ccgxw9Xi.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"gpio_interrupt.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Src/Zeugma_c/gpio_interrupt.c"
  18              		.section	.text.HAL_GPIO_EXTI_Callback,"ax",%progbits
  19              		.align	1
  20              		.global	HAL_GPIO_EXTI_Callback
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	HAL_GPIO_EXTI_Callback:
  26              	.LVL0:
  27              	.LFB68:
   1:Src/Zeugma_c/gpio_interrupt.c **** 
   2:Src/Zeugma_c/gpio_interrupt.c **** #include "gpio_interrupt.h"
   3:Src/Zeugma_c/gpio_interrupt.c **** #include "tim.h"
   4:Src/Zeugma_c/gpio_interrupt.c **** #include "rpm.h"
   5:Src/Zeugma_c/gpio_interrupt.c **** #include "old_value_hall.h"
   6:Src/Zeugma_c/gpio_interrupt.c **** #include "steps.h"
   7:Src/Zeugma_c/gpio_interrupt.c **** #include <stdlib.h>
   8:Src/Zeugma_c/gpio_interrupt.c **** #include "main.h"
   9:Src/Zeugma_c/gpio_interrupt.c **** #include <debug_monitor.h>
  10:Src/Zeugma_c/gpio_interrupt.c **** 
  11:Src/Zeugma_c/gpio_interrupt.c **** 
  12:Src/Zeugma_c/gpio_interrupt.c **** void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)
  13:Src/Zeugma_c/gpio_interrupt.c **** {
  28              		.loc 1 13 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 13 1 is_stmt 0 view .LVU1
  33 0000 10B5     		push	{r4, lr}
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
  14:Src/Zeugma_c/gpio_interrupt.c **** 
  15:Src/Zeugma_c/gpio_interrupt.c ****   hall_A = HAL_GPIO_ReadPin(GPIOA, GPIO_PIN_0);
  37              		.loc 1 15 3 is_stmt 1 view .LVU2
  38              		.loc 1 15 12 is_stmt 0 view .LVU3
  39 0002 434C     		ldr	r4, .L12
  40 0004 0121     		movs	r1, #1
  41 0006 2046     		mov	r0, r4
  42              	.LVL1:
  43              		.loc 1 15 12 view .LVU4
ARM GAS  /tmp/ccgxw9Xi.s 			page 2


  44 0008 FFF7FEFF 		bl	HAL_GPIO_ReadPin
  45              	.LVL2:
  46              		.loc 1 15 12 discriminator 1 view .LVU5
  47 000c 0038     		subs	r0, r0, #0
  48 000e 18BF     		it	ne
  49 0010 0120     		movne	r0, #1
  50              		.loc 1 15 10 discriminator 1 view .LVU6
  51 0012 404B     		ldr	r3, .L12+4
  52 0014 1870     		strb	r0, [r3]
  16:Src/Zeugma_c/gpio_interrupt.c ****   hall_B = HAL_GPIO_ReadPin(GPIOA, GPIO_PIN_1);
  53              		.loc 1 16 3 is_stmt 1 view .LVU7
  54              		.loc 1 16 12 is_stmt 0 view .LVU8
  55 0016 0221     		movs	r1, #2
  56 0018 2046     		mov	r0, r4
  57 001a FFF7FEFF 		bl	HAL_GPIO_ReadPin
  58              	.LVL3:
  59              		.loc 1 16 12 discriminator 1 view .LVU9
  60 001e 0038     		subs	r0, r0, #0
  61 0020 18BF     		it	ne
  62 0022 0120     		movne	r0, #1
  63              		.loc 1 16 10 discriminator 1 view .LVU10
  64 0024 3C4B     		ldr	r3, .L12+8
  65 0026 1870     		strb	r0, [r3]
  17:Src/Zeugma_c/gpio_interrupt.c ****   hall_C = HAL_GPIO_ReadPin(GPIOA, GPIO_PIN_2);
  66              		.loc 1 17 3 is_stmt 1 view .LVU11
  67              		.loc 1 17 12 is_stmt 0 view .LVU12
  68 0028 0421     		movs	r1, #4
  69 002a 2046     		mov	r0, r4
  70 002c FFF7FEFF 		bl	HAL_GPIO_ReadPin
  71              	.LVL4:
  72              		.loc 1 17 12 discriminator 1 view .LVU13
  73 0030 0038     		subs	r0, r0, #0
  74 0032 18BF     		it	ne
  75 0034 0120     		movne	r0, #1
  76              		.loc 1 17 10 discriminator 1 view .LVU14
  77 0036 394B     		ldr	r3, .L12+12
  78 0038 1870     		strb	r0, [r3]
  18:Src/Zeugma_c/gpio_interrupt.c ****   first_step_flag = 1;
  79              		.loc 1 18 3 is_stmt 1 view .LVU15
  80              		.loc 1 18 19 is_stmt 0 view .LVU16
  81 003a 394B     		ldr	r3, .L12+16
  82 003c 0122     		movs	r2, #1
  83 003e 1A70     		strb	r2, [r3]
  19:Src/Zeugma_c/gpio_interrupt.c ****   // if (hall_A != oncekiDegerler[0] || hall_B != oncekiDegerler[1] || hall_C != oncekiDegerler[2])
  20:Src/Zeugma_c/gpio_interrupt.c ****   // {
  21:Src/Zeugma_c/gpio_interrupt.c ****   // rpm_counter++;
  22:Src/Zeugma_c/gpio_interrupt.c ****   difference_two_coummutation_time = __HAL_TIM_GET_COUNTER(&htim2);
  84              		.loc 1 22 3 is_stmt 1 view .LVU17
  85              		.loc 1 22 38 is_stmt 0 view .LVU18
  86 0040 384B     		ldr	r3, .L12+20
  87 0042 1B68     		ldr	r3, [r3]
  88 0044 5A6A     		ldr	r2, [r3, #36]
  89              		.loc 1 22 36 view .LVU19
  90 0046 384B     		ldr	r3, .L12+24
  91 0048 1A60     		str	r2, [r3]
  23:Src/Zeugma_c/gpio_interrupt.c ****   rpm = get_rpm(difference_two_coummutation_time);
  92              		.loc 1 23 3 is_stmt 1 view .LVU20
ARM GAS  /tmp/ccgxw9Xi.s 			page 3


  93              		.loc 1 23 9 is_stmt 0 view .LVU21
  94 004a 1868     		ldr	r0, [r3]
  95 004c FFF7FEFF 		bl	get_rpm
  96              	.LVL5:
  97              		.loc 1 23 7 discriminator 1 view .LVU22
  98 0050 364B     		ldr	r3, .L12+28
  99 0052 1860     		str	r0, [r3]
  24:Src/Zeugma_c/gpio_interrupt.c **** 
  25:Src/Zeugma_c/gpio_interrupt.c ****   for (int i = 0; i < 30; i++)
 100              		.loc 1 25 3 is_stmt 1 view .LVU23
 101              	.LBB2:
 102              		.loc 1 25 8 view .LVU24
 103              	.LVL6:
 104              		.loc 1 25 12 is_stmt 0 view .LVU25
 105 0054 0023     		movs	r3, #0
 106              		.loc 1 25 3 view .LVU26
 107 0056 00E0     		b	.L2
 108              	.LVL7:
 109              	.L3:
 110              		.loc 1 25 28 is_stmt 1 discriminator 2 view .LVU27
 111 0058 0133     		adds	r3, r3, #1
 112              	.LVL8:
 113              	.L2:
 114              		.loc 1 25 21 discriminator 1 view .LVU28
 115 005a 1D2B     		cmp	r3, #29
 116 005c 13DC     		bgt	.L4
  26:Src/Zeugma_c/gpio_interrupt.c ****   {
  27:Src/Zeugma_c/gpio_interrupt.c ****     if (rpm > (i * 100) && rpm <= ((i + 1) * 100))
 117              		.loc 1 27 5 view .LVU29
 118              		.loc 1 27 18 is_stmt 0 view .LVU30
 119 005e 6422     		movs	r2, #100
 120 0060 03FB02F2 		mul	r2, r3, r2
 121              		.loc 1 27 13 view .LVU31
 122 0064 3149     		ldr	r1, .L12+28
 123 0066 0968     		ldr	r1, [r1]
 124              		.loc 1 27 8 view .LVU32
 125 0068 8A42     		cmp	r2, r1
 126 006a F5D2     		bcs	.L3
 127              		.loc 1 27 44 discriminator 1 view .LVU33
 128 006c 6422     		movs	r2, #100
 129 006e 03FB0222 		mla	r2, r3, r2, r2
 130              		.loc 1 27 32 discriminator 1 view .LVU34
 131 0072 2E49     		ldr	r1, .L12+28
 132 0074 0968     		ldr	r1, [r1]
 133              		.loc 1 27 25 discriminator 1 view .LVU35
 134 0076 8A42     		cmp	r2, r1
 135 0078 EED3     		bcc	.L3
  28:Src/Zeugma_c/gpio_interrupt.c ****     {
  29:Src/Zeugma_c/gpio_interrupt.c ****       saved_pwm_rpm[i] = pwm_value;
 136              		.loc 1 29 7 is_stmt 1 view .LVU36
 137              		.loc 1 29 24 is_stmt 0 view .LVU37
 138 007a 2D4A     		ldr	r2, .L12+32
 139 007c 1268     		ldr	r2, [r2]
 140 007e 92B2     		uxth	r2, r2
 141 0080 2C49     		ldr	r1, .L12+36
 142 0082 21F81320 		strh	r2, [r1, r3, lsl #1]	@ movhi
  30:Src/Zeugma_c/gpio_interrupt.c ****       break;
ARM GAS  /tmp/ccgxw9Xi.s 			page 4


 143              		.loc 1 30 7 is_stmt 1 view .LVU38
 144              	.L4:
 145              	.LBE2:
  31:Src/Zeugma_c/gpio_interrupt.c ****     }
  32:Src/Zeugma_c/gpio_interrupt.c ****   }
  33:Src/Zeugma_c/gpio_interrupt.c **** 
  34:Src/Zeugma_c/gpio_interrupt.c ****   __HAL_TIM_SET_COUNTER(&htim2, 0);
 146              		.loc 1 34 3 view .LVU39
 147 0086 274B     		ldr	r3, .L12+20
 148              	.LVL9:
 149              		.loc 1 34 3 is_stmt 0 view .LVU40
 150 0088 1B68     		ldr	r3, [r3]
 151 008a 0022     		movs	r2, #0
 152 008c 5A62     		str	r2, [r3, #36]
  35:Src/Zeugma_c/gpio_interrupt.c ****   // }
  36:Src/Zeugma_c/gpio_interrupt.c **** 
  37:Src/Zeugma_c/gpio_interrupt.c ****   if (run_status)
 153              		.loc 1 37 3 is_stmt 1 view .LVU41
 154              		.loc 1 37 7 is_stmt 0 view .LVU42
 155 008e 2A4B     		ldr	r3, .L12+40
 156 0090 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 157              		.loc 1 37 6 view .LVU43
 158 0092 A3B1     		cbz	r3, .L6
  38:Src/Zeugma_c/gpio_interrupt.c ****   {
  39:Src/Zeugma_c/gpio_interrupt.c ****     if ((hall_A == hall_C) && (hall_A == hall_B))
 159              		.loc 1 39 5 is_stmt 1 view .LVU44
 160              		.loc 1 39 17 is_stmt 0 view .LVU45
 161 0094 1F4B     		ldr	r3, .L12+4
 162 0096 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 163 0098 D2B2     		uxtb	r2, r2
 164 009a 204B     		ldr	r3, .L12+12
 165 009c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 166 009e DBB2     		uxtb	r3, r3
 167              		.loc 1 39 8 view .LVU46
 168 00a0 9A42     		cmp	r2, r3
 169 00a2 10D0     		beq	.L10
 170              	.L7:
  40:Src/Zeugma_c/gpio_interrupt.c ****     {
  41:Src/Zeugma_c/gpio_interrupt.c ****       hall_A = oncekiDegerler[0];
  42:Src/Zeugma_c/gpio_interrupt.c ****       hall_B = oncekiDegerler[1];
  43:Src/Zeugma_c/gpio_interrupt.c ****       hall_C = oncekiDegerler[2];
  44:Src/Zeugma_c/gpio_interrupt.c ****     }
  45:Src/Zeugma_c/gpio_interrupt.c ****     else
  46:Src/Zeugma_c/gpio_interrupt.c ****     {
  47:Src/Zeugma_c/gpio_interrupt.c ****       oncekiDegerler[0] = hall_A;
 171              		.loc 1 47 7 is_stmt 1 view .LVU47
 172              		.loc 1 47 25 is_stmt 0 view .LVU48
 173 00a4 1B4B     		ldr	r3, .L12+4
 174 00a6 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 175 00a8 D2B2     		uxtb	r2, r2
 176 00aa 244B     		ldr	r3, .L12+44
 177 00ac 1A70     		strb	r2, [r3]
  48:Src/Zeugma_c/gpio_interrupt.c ****       oncekiDegerler[1] = hall_B;
 178              		.loc 1 48 7 is_stmt 1 view .LVU49
 179              		.loc 1 48 25 is_stmt 0 view .LVU50
 180 00ae 1A4A     		ldr	r2, .L12+8
 181 00b0 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
ARM GAS  /tmp/ccgxw9Xi.s 			page 5


 182 00b2 D2B2     		uxtb	r2, r2
 183 00b4 5A70     		strb	r2, [r3, #1]
  49:Src/Zeugma_c/gpio_interrupt.c ****       oncekiDegerler[2] = hall_C;
 184              		.loc 1 49 7 is_stmt 1 view .LVU51
 185              		.loc 1 49 25 is_stmt 0 view .LVU52
 186 00b6 194A     		ldr	r2, .L12+12
 187 00b8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 188 00ba D2B2     		uxtb	r2, r2
 189 00bc 9A70     		strb	r2, [r3, #2]
 190              	.L6:
  50:Src/Zeugma_c/gpio_interrupt.c ****     }
  51:Src/Zeugma_c/gpio_interrupt.c ****   }
  52:Src/Zeugma_c/gpio_interrupt.c ****   // sample_phase_data(rpm, (uint16_t)phase_A, (uint16_t)phase_B, (uint16_t)phase_C);
  53:Src/Zeugma_c/gpio_interrupt.c ****   if (!backEMF_mode)
 191              		.loc 1 53 3 is_stmt 1 view .LVU53
 192              		.loc 1 53 7 is_stmt 0 view .LVU54
 193 00be 204B     		ldr	r3, .L12+48
 194 00c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 195              		.loc 1 53 6 view .LVU55
 196 00c2 E3B1     		cbz	r3, .L11
 197              	.L1:
  54:Src/Zeugma_c/gpio_interrupt.c ****   {
  55:Src/Zeugma_c/gpio_interrupt.c ****     set_old_value();
  56:Src/Zeugma_c/gpio_interrupt.c ****     execute_step(step);
  57:Src/Zeugma_c/gpio_interrupt.c ****   }
  58:Src/Zeugma_c/gpio_interrupt.c ****   // analyze_step_counter++;
  59:Src/Zeugma_c/gpio_interrupt.c **** }
 198              		.loc 1 59 1 view .LVU56
 199 00c4 10BD     		pop	{r4, pc}
 200              	.L10:
  39:Src/Zeugma_c/gpio_interrupt.c ****     {
 201              		.loc 1 39 39 discriminator 1 view .LVU57
 202 00c6 134B     		ldr	r3, .L12+4
 203 00c8 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 204 00ca D2B2     		uxtb	r2, r2
 205 00cc 124B     		ldr	r3, .L12+8
 206 00ce 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 207 00d0 DBB2     		uxtb	r3, r3
  39:Src/Zeugma_c/gpio_interrupt.c ****     {
 208              		.loc 1 39 28 discriminator 1 view .LVU58
 209 00d2 9A42     		cmp	r2, r3
 210 00d4 E6D1     		bne	.L7
  41:Src/Zeugma_c/gpio_interrupt.c ****       hall_B = oncekiDegerler[1];
 211              		.loc 1 41 7 is_stmt 1 view .LVU59
  41:Src/Zeugma_c/gpio_interrupt.c ****       hall_B = oncekiDegerler[1];
 212              		.loc 1 41 30 is_stmt 0 view .LVU60
 213 00d6 194B     		ldr	r3, .L12+44
 214 00d8 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 215 00da 003A     		subs	r2, r2, #0
 216 00dc 18BF     		it	ne
 217 00de 0122     		movne	r2, #1
  41:Src/Zeugma_c/gpio_interrupt.c ****       hall_B = oncekiDegerler[1];
 218              		.loc 1 41 14 view .LVU61
 219 00e0 0C49     		ldr	r1, .L12+4
 220 00e2 0A70     		strb	r2, [r1]
  42:Src/Zeugma_c/gpio_interrupt.c ****       hall_C = oncekiDegerler[2];
 221              		.loc 1 42 7 is_stmt 1 view .LVU62
ARM GAS  /tmp/ccgxw9Xi.s 			page 6


  42:Src/Zeugma_c/gpio_interrupt.c ****       hall_C = oncekiDegerler[2];
 222              		.loc 1 42 30 is_stmt 0 view .LVU63
 223 00e4 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 224 00e6 003A     		subs	r2, r2, #0
 225 00e8 18BF     		it	ne
 226 00ea 0122     		movne	r2, #1
  42:Src/Zeugma_c/gpio_interrupt.c ****       hall_C = oncekiDegerler[2];
 227              		.loc 1 42 14 view .LVU64
 228 00ec 0A49     		ldr	r1, .L12+8
 229 00ee 0A70     		strb	r2, [r1]
  43:Src/Zeugma_c/gpio_interrupt.c ****     }
 230              		.loc 1 43 7 is_stmt 1 view .LVU65
  43:Src/Zeugma_c/gpio_interrupt.c ****     }
 231              		.loc 1 43 30 is_stmt 0 view .LVU66
 232 00f0 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 233 00f2 003B     		subs	r3, r3, #0
 234 00f4 18BF     		it	ne
 235 00f6 0123     		movne	r3, #1
  43:Src/Zeugma_c/gpio_interrupt.c ****     }
 236              		.loc 1 43 14 view .LVU67
 237 00f8 084A     		ldr	r2, .L12+12
 238 00fa 1370     		strb	r3, [r2]
 239 00fc DFE7     		b	.L6
 240              	.L11:
  55:Src/Zeugma_c/gpio_interrupt.c ****     execute_step(step);
 241              		.loc 1 55 5 is_stmt 1 view .LVU68
 242 00fe FFF7FEFF 		bl	set_old_value
 243              	.LVL10:
  56:Src/Zeugma_c/gpio_interrupt.c ****   }
 244              		.loc 1 56 5 view .LVU69
 245 0102 104B     		ldr	r3, .L12+52
 246 0104 1868     		ldr	r0, [r3]
 247 0106 C0B2     		uxtb	r0, r0
 248 0108 FFF7FEFF 		bl	execute_step
 249              	.LVL11:
 250              		.loc 1 59 1 is_stmt 0 view .LVU70
 251 010c DAE7     		b	.L1
 252              	.L13:
 253 010e 00BF     		.align	2
 254              	.L12:
 255 0110 00080140 		.word	1073809408
 256 0114 00000000 		.word	hall_A
 257 0118 00000000 		.word	hall_B
 258 011c 00000000 		.word	hall_C
 259 0120 00000000 		.word	first_step_flag
 260 0124 00000000 		.word	htim2
 261 0128 00000000 		.word	difference_two_coummutation_time
 262 012c 00000000 		.word	rpm
 263 0130 00000000 		.word	pwm_value
 264 0134 00000000 		.word	saved_pwm_rpm
 265 0138 00000000 		.word	run_status
 266 013c 00000000 		.word	oncekiDegerler
 267 0140 00000000 		.word	backEMF_mode
 268 0144 00000000 		.word	step
 269              		.cfi_endproc
 270              	.LFE68:
 272              		.text
ARM GAS  /tmp/ccgxw9Xi.s 			page 7


 273              	.Letext0:
 274              		.file 2 "/usr/lib/gcc/arm-none-eabi/13.3.1/include/stdint.h"
 275              		.file 3 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 276              		.file 4 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 277              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 278              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 279              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_tim.h"
 280              		.file 8 "Inc/main.h"
 281              		.file 9 "Inc/tim.h"
 282              		.file 10 "Inc/Zeugma_h/rpm.h"
 283              		.file 11 "Inc/Zeugma_h/steps.h"
 284              		.file 12 "Inc/Zeugma_h/old_value_hall.h"
ARM GAS  /tmp/ccgxw9Xi.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 gpio_interrupt.c
     /tmp/ccgxw9Xi.s:19     .text.HAL_GPIO_EXTI_Callback:00000000 $t
     /tmp/ccgxw9Xi.s:25     .text.HAL_GPIO_EXTI_Callback:00000000 HAL_GPIO_EXTI_Callback
     /tmp/ccgxw9Xi.s:255    .text.HAL_GPIO_EXTI_Callback:00000110 $d

UNDEFINED SYMBOLS
HAL_GPIO_ReadPin
get_rpm
set_old_value
execute_step
hall_A
hall_B
hall_C
first_step_flag
htim2
difference_two_coummutation_time
rpm
pwm_value
saved_pwm_rpm
run_status
oncekiDegerler
backEMF_mode
step
